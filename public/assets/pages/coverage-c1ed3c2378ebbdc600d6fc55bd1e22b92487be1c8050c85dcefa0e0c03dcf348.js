var CoverageMap=function(){return{options:{center:new google.maps.LatLng(41.87,12.6),zoom:11,disableDefaultUI:!0,draggable:!1,scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,scaleControl:!1,disableDoubleClickZoom:!0,mapTypeId:google.maps.MapTypeId.ROADMAP},coordinatesUrl:"/data/coverage.json",mapCanvas:"map-canvas",map:null,polygons:[],init:function(){this.map=new google.maps.Map(document.getElementById(this.mapCanvas),this.options),this.drawPolygons()},drawPolygons:function(){var t=this;$.getJSON(this.coordinatesUrl,function(o){var e;for(e in o)t.drawPolygon(t.parseCoordinates(o[e]))})},drawPolygon:function(t){var o=new google.maps.Polygon({paths:t,strokeColor:"#cc7a00",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF9900",fillOpacity:.35});o.setMap(this.map),this.polygons.push(o)},parseCoordinates:function(t){var o,e,a=[];for(o in t)e=t[o],a.push(new google.maps.LatLng(e[0],e[1]));return a},polygonsContain:function(t){var o,e;for(o in this.polygons)if(e=this.polygons[o],google.maps.geometry.poly.containsLocation(t,e))return!0;return!1}}}(),CoverageAutocomplete=function(){return{input:"coverage-address",options:{types:["geocode"],componentRestrictions:{country:"it"}},map:null,autocomplete:null,init:function(t){this.map=t,this.autocomplete=new google.maps.places.Autocomplete(document.getElementById(this.input),this.options),this.map&&this.autocomplete.bindTo("bounds",this.map.map)},onPlaceChanged:function(t){google.maps.event.addListener(this.autocomplete,"place_changed",t)}}}(),CoverageChecker=function(){return{map:null,autocomplete:null,result:"check-status",inquiry_path:"/inquiries/new",init:function(t,o){this.map=t,this.autocomplete=o;var e=this;this.autocomplete.onPlaceChanged(function(){e.checkPlace()})},checkPlace:function(){var t=this.autocomplete.autocomplete.getPlace(),o=$(document.getElementById(this.result));return o.removeClass("check-status-standby").removeClass("check-status-yes").removeClass("check-status-no").attr("href","#"),t.geometry?void(this.map.polygonsContain(t.geometry.location)?o.addClass("check-status-yes").html('<i class="fa fa-check"></i> Sei coperto!').attr("href",this.inquiry_path):o.addClass("check-status-no").html('<i class="fa fa-times"></i> Non sei coperto')):void o.addClass("check-status-standby").html('<i class="fa fa-arrow-left"></i> In attesa...')}}}();!function(){var t=function(){var t=($(window).height()-$("#map-overlay-inner").height())/2+1;100>t&&(t=100),$("#map-overlay").css("padding-top",t+"px"),$("#map-overlay").css("padding-bottom",t+"px")};$(t),$(window).load(t),$(window).resize(t)}(),function(){$(function(){CoverageMap.init(),CoverageAutocomplete.init(CoverageMap),CoverageChecker.init(CoverageMap,CoverageAutocomplete)})}();